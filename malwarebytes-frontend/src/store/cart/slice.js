/* eslint-disable no-param-reassign */
import { createSlice } from "@reduxjs/toolkit";

const cartSlice = createSlice({
  name: "cart",
  initialState: { totalItems: 0 },
  reducers: {
    updateCart(state) {
      const keys = Object.keys(localStorage).filter((key) =>
        /^product/.test(key)
      );
      const sum = keys.reduce(
        (acc, cur) => acc + Number(localStorage.getItem(cur)),
        0
      );

      state.totalItems = sum;
    },
  },
});

export const { updateCart } = cartSlice.actions;

export default cartSlice.reducer;

/* eslint-enable no-param-reassign */
